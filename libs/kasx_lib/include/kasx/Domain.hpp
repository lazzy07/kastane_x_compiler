/*
* File name: Domain.hpp
* Project: KasX Compiler
* Author: Lasantha M Senanayake
* Date created: 2025-12-14 01:49:32
// Date modified: 2026-01-04 22:26:28
* ------
*/

#pragma once

#include <kasx/core/scopes/GlobalScope.hpp>

#include "kasx/Types.hpp"

namespace KasX::Compiler::Visitors {
class ProgramVisitor;
}

namespace KasX::Compiler::Core {
/**
 * @class Domain
 * @brief This class holds all the data related to the domain, its the entrypoint to all the data and controls all the acccess to
 * the domain data
 */
class Domain {
 public:
  /**
   * @brief Domain constructor
   *
   * @param data DomainData required to initialize the Domain.
   */
  explicit Domain(DomainData& data);
  ~Domain();
  /**
   * @brief Initializes the visitor class generated by the antlr4 generator to visit the domain file.
   */
  void initVisitor();

  /**
   * @brief Initializes default types number, boolean, entity and character types in the global scope.
   */
  void initDefaultTypes();

  /**
   * @brief Getter for the global scope.
   *
   * @return Global scope.
   */
  Scopes::GlobalScope* getGlobalScope() { return &m_GlobalScope; };

 private:
  Scopes::GlobalScope m_GlobalScope;
  DomainData m_DomainData;
  std::unique_ptr<Compiler::Visitors::ProgramVisitor> m_ProgramVisitor;
};
}  // namespace KasX::Compiler::Core
